<div
  class="modal fade"
  tabindex="-1"
  aria-hidden="true"
  data-bs-backdrop="static">
  <div class="modal-dialog modal-sm">
    <form
      class="modal-content"
      [formGroup]="form"
      (submit)="save()">
      <div class="modal-header">
        <h5 class="modal-title">{{ form.get("userId").disabled ? "Editar" : "Agregar" }} usuario</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"></button>
      </div>
      <div
        class="modal-body"
        [class.loading]="isLoading">
        <div class="mb-3">
          <label class="form-label">Usuario</label>
          <input
            type="text"
            class="form-control text-uppercase"
            formControlName="userId"
            maxlength="250"
            [class.is-invalid]="form.get('userId').touched && form.get('userId').errors" />
        </div>
        <div class="mb-3">
          <label class="form-label">Rol</label>
          @if (isAdmin) {
            <select
              class="form-select"
              formControlName="userTypeId">
              @for (item of roles; track item.typeId) {
                <option [value]="item.typeId">{{ item.detail }}</option>
              }
            </select>
          } @else {
            <div class="form-control form-control-plaintext border px-2">
              {{ form.get("userType").value }}
            </div>
          }
        </div>
        <div class="mb-3">
          <label class="form-label">Contrase√±a</label>
          <div class="input-group">
            <input
              [type]="showPass ? 'text' : 'password'"
              class="form-control"
              formControlName="password"
              maxlength="250"
              [class.is-invalid]="form.get('password').touched && form.get('password').errors" />
            <div
              class="input-group-text cursor-pointer"
              (click)="showPass = !showPass">
              <i
                class="bx"
                [ngClass]="showPass ? 'bx-show' : 'bx-hide'"></i>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <div class="form-check form-switch">
            <input
              class="form-check-input"
              type="checkbox"
              id="cb-user"
              formControlName="flagActive" />
            <label
              class="form-check-label"
              for="cb-user">
              Activo
            </label>
          </div>
        </div>
        @if (message) {
          <div class="alert alert-danger small py-2 mb-0">
            {{ message }}
          </div>
        }
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary rounded-pill"
          data-bs-dismiss="modal">
          Salir
        </button>
        <button
          type="submit"
          class="btn btn-primary rounded-pill px-3"
          [disabled]="form.invalid || isLoading">
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>
